<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouzbek Global - RAPPORT D'ARCHITECTURE ET DE SÉCURISATION - SRV-MAIL</title>
    <style>
        /* [Styles identiques au modèle fourni] */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #f5f7fa;
            color: #1e293b;
            line-height: 1.6;
            padding: 2rem 1rem;
        }

        .report-container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 40px -15px rgba(0,20,40,0.2);
            overflow: hidden;
        }

        .report-header {
            background: #0a2c3d;
            color: white;
            padding: 2.5rem 3rem;
        }

        .report-header h1 {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
        }

        .report-header .subtitle {
            font-size: 1.2rem;
            opacity: 0.85;
            font-weight: 400;
        }

        .meta-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.7;
        }

        .meta-value {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .report-content {
            padding: 2.5rem 3rem;
        }

        h2 {
            font-size: 1.6rem;
            font-weight: 600;
            color: #0a2c3d;
            margin: 2.2rem 0 1rem 0;
            padding-bottom: 0.4rem;
            border-bottom: 2px solid #e0e7ef;
        }

        h2:first-of-type {
            margin-top: 0;
        }

        h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e4a6d;
            margin: 1.5rem 0 0.5rem 0;
        }

        h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #0a2c3d;
            margin: 1.2rem 0 0.3rem 0;
        }

        .executive-summary {
            background: #f0f6fb;
            border-radius: 16px;
            padding: 1.5rem 2rem;
            margin: 1.5rem 0;
            border-left: 5px solid #0a2c3d;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.95rem;
        }

        th {
            background: #f0f4f8;
            font-weight: 600;
            padding: 0.75rem 1rem;
            text-align: left;
            color: #1e293b;
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #0a2c3d;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #475569;
            text-transform: uppercase;
        }

        .image-container {
            margin: 2rem 0;
            border: 1px solid #e2e8f0;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }

        .image-container img {
            width: 100%;
            height: auto;
            display: block;
            border-bottom: 1px solid #eef2f6;
        }

        .image-caption {
            background: #f9fafc;
            padding: 0.8rem 1.2rem;
            font-size: 0.9rem;
            color: #475569;
            font-weight: 500;
            border-top: 1px solid #e2e8f0;
        }

        .image-caption span {
            font-family: 'SF Mono', monospace;
            background: #edf2f7;
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-size: 0.8rem;
            color: #2d4b6e;
            margin-left: 0.5rem;
        }

        hr {
            border: none;
            border-top: 2px dashed #bac8d9;
            margin: 2.5rem 0;
        }

        pre {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 12px;
            font-size: 0.9rem;
            border: 1px solid #d1d9e6;
            white-space: pre-wrap;
            font-family: 'SF Mono', monospace;
        }

        ul, ol {
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        li {
            margin-bottom: 0.3rem;
        }

        .signature-block {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 2px solid #e2e8f0;
        }

        .signature-line {
            width: 250px;
            border-bottom: 2px solid #0a2c3d;
            margin: 0.5rem 0;
        }

        .justification-box {
            background: #f4f9ff;
            border-left: 4px solid #1e4a6d;
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            border-radius: 0 12px 12px 0;
        }

        .badge {
            display: inline-block;
            background: #dcfce7;
            color: #166534;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            margin-right: 0.5rem;
        }

        @media (max-width: 650px) {
            .report-header, .report-content { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="report-container">
        <!-- Header -->
        <div class="report-header">
            <h1>RAPPORT D'ARCHITECTURE ET DE SÉCURISATION</h1>
            <div class="subtitle">Plateforme de Messagerie d'Entreprise (Postfix + Dovecot)</div>
            <div class="meta-grid">
                <div class="meta-item"><span class="meta-label">Date</span><span class="meta-value">13 Février 2026</span></div>
                <div class="meta-item"><span class="meta-label">Rédacteur</span><span class="meta-value">Sugira Yannick</span></div>
                <div class="meta-item"><span class="meta-label">Version</span><span class="meta-value">1.0 - Synthèse Direction</span></div>
                <div class="meta-item"><span class="meta-label">Domaine</span><span class="meta-value">ouzbek.global</span></div>
                <div class="meta-item"><span class="meta-label">Serveur principal</span><span class="meta-value">172.16.11.37 (DMZ)</span></div>
                <div class="meta-item"><span class="meta-label">Base de données</span><span class="meta-value">172.16.11.5 (LAN)</span></div>
            </div>
        </div>

        <!-- Content -->
        <div class="report-content">
            <!-- 1. CONTEXTE ET OBJECTIFS -->
            <h2>1. CONTEXTE ET OBJECTIFS</h2>

            <p>Dans le cadre de la refonte complète de son système d'information, l'entreprise Ouzbek Global (activité e-commerce) doit se doter d'une <strong>plateforme de messagerie professionnelle, sécurisée et conforme</strong> aux exigences réglementaires pour ses communications internes et avec ses clients.</p>

            <h3>Objectifs poursuivis :</h3>
            <table>
                <tr><th>Objectif</th><th>Bénéfice attendu</th></tr>
                <tr><td><strong>Professionnaliser les communications</strong></td><td>Adresses email @ouzbek.global, image de marque renforcée</td></tr>
                <tr><td><strong>Sécuriser les échanges</strong></td><td>Chiffrement TLS 1.3, protection anti-spam/virus</td></tr>
                <tr><td><strong>Isoler les données sensibles</strong></td><td>Base de données (comptes) en LAN, tunnel SSH</td></tr>
                <tr><td><strong>Garantir la traçabilité</strong></td><td>Journalisation des connexions et des accès</td></tr>
                <tr><td><strong>Assurer la conformité</strong></td><td>Répondre aux exigences ANSSI et RGPD</td></tr>
            </table>

            <hr>

            <!-- 2. PÉRIMÈTRE ET PRINCIPES DE SÉCURITÉ -->
            <h2>2. PÉRIMÈTRE ET PRINCIPES DE SÉCURITÉ</h2>

            <p>Le périmètre couvert par ce déploiement inclut :</p>
            <ul>
                <li><strong>Le serveur de messagerie (MTA)</strong> : Postfix en DMZ</li>
                <li><strong>Le serveur d'accès aux boîtes (MDA)</strong> : Dovecot en DMZ</li>
                <li><strong>La base de données des comptes</strong> : MariaDB en LAN</li>
                <li><strong>Le filtrage anti-spam et anti-virus</strong> : SpamAssassin, ClamAV</li>
                <li><strong>Le webmail</strong> : Roundcube</li>
            </ul>

            <h3>Principes de sécurité appliqués :</h3>
            <table>
                <tr><th>Principe</th><th>Implémentation</th></tr>
                <tr><td><strong>Segmentation réseau</strong></td><td>DMZ pour services exposés, LAN pour données sensibles</td></tr>
                <tr><td><strong>Chiffrement systématique</strong></td><td>TLS 1.3 sur SMTP, IMAP, POP3, HTTPS</td></tr>
                <tr><td><strong>Moindre privilège</strong></td><td>Comptes applicatifs dédiés, droits limités</td></tr>
                <tr><td><strong>Protection anti-bruteforce</strong></td><td>Fail2ban sur tous les services</td></tr>
                <tr><td><strong>Traçabilité</strong></td><td>Journalisation centralisée des connexions</td></tr>
            </table>

            <hr>

            <!-- 3. ARCHITECTURE GLOBALE ET JUSTIFICATIONS -->
            <h2>3. ARCHITECTURE GLOBALE ET JUSTIFICATIONS</h2>

            <h3>3.1. Choix de l'architecture DMZ/LAN</h3>

            <p>L'infrastructure repose sur une <strong>segmentation en deux zones réseau distinctes</strong> pour isoler les données sensibles :</p>

            <pre>INTERNET → Pare-feu → DMZ (SRV-MAIL: 172.16.11.37) ←→ [Tunnel SSH] → LAN (SRV-SQL: 172.16.11.5)</pre>

            <div class="justification-box">
                <p><strong>Justification :</strong></p>
                <ul>
                    <li>✅ <strong>Sécurité</strong> : les comptes utilisateurs et mots de passe (données sensibles) ne sont jamais exposés directement sur Internet.</li>
                    <li>✅ <strong>Résilience</strong> : une compromission du serveur DMZ n'entraîne pas un accès direct aux données de la base.</li>
                    <li>✅ <strong>Conformité</strong> : respect des recommandations ANSSI sur la séparation des zones.</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Serveur mail tout-en-un (DMZ unique)</em> : rejeté car trop risqué (données sensibles exposées).</li>
                    <li><em>VLANs</em> : rejeté pour cause de complexité sur notre hyperviseur de type 2.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/ARCHITECTURE_RESEAU_SIMPLIFIE.png" alt="Architecture messagerie">
                <div class="image-caption">
                    Schéma 1 – Architecture DMZ/LAN de la messagerie <span>ARCHITECTURE_RÉSEAU_SIMPLIFIE.png</span>
                </div>
            </div>

            <h3>3.2. Choix de Postfix pour le transfert de courriels (MTA)</h3>

            <div class="justification-box">
                <p><strong>Justification :</strong></p>
                <ul>
                    <li>✅ <strong>Maturité</strong> : solution éprouvée depuis plus de 20 ans, utilisée sur des millions de serveurs.</li>
                    <li>✅ <strong>Performance</strong> : capable de gérer des milliers de messages par seconde avec une faible empreinte mémoire.</li>
                    <li>✅ <strong>Sécurité</strong> : architecture modulaire limitant les risques, support natif de TLS et des chroot.</li>
                    <li>✅ <strong>Flexibilité</strong> : intégration aisée avec MySQL, LDAP ou SQLite.</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Exim</em> : rejeté pour une configuration jugée plus complexe.</li>
                    <li><em>Microsoft Exchange</em> : rejeté pour des raisons de coûts de licence et de surcharge fonctionnelle.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_02_postfix_mysql.png" alt="Mapping Postfix MySQL">
                <div class="image-caption">
                    Figure 1 – Fichiers de mapping MySQL pour Postfix <span>mail_02_postfix_mysql.png</span>
                </div>
            </div>

            <h3>3.3. Choix de Dovecot pour l'accès aux boîtes aux lettres (MDA)</h3>

            <div class="justification-box">
                <p><strong>Justification :</strong></p>
                <ul>
                    <li>✅ <strong>Performances</strong> : reconnu pour sa rapidité d'accès aux boîtes aux lettres, même avec un grand nombre de messages.</li>
                    <li>✅ <strong>Fonctionnalités</strong> : support natif des quotas, du filtrage Sieve, de la réplication et de l'intégration SQL/LDAP.</li>
                    <li>✅ <strong>Sécurité</strong> : support de TLS 1.3, mécanismes d'authentification variés.</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Courier-IMAP</em> : rejeté pour une configuration plus archaïque et moins de fonctionnalités.</li>
                    <li><em>Cyrus-IMAP</em> : rejeté pour sa complexité de mise en œuvre.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_06_dovecot_sql.png" alt="Configuration SQL Dovecot">
                <div class="image-caption">
                    Figure 2 – Configuration SQL de Dovecot <span>mail_06_dovecot_sql.png</span>
                </div>
            </div>

            <h3>3.4. Choix du tunnel SSH pour la connexion à la base de données</h3>

            <div class="justification-box">
                <p><strong>Justification :</strong></p>
                <ul>
                    <li>✅ <strong>Chiffrement</strong> : toutes les communications entre la DMZ et le LAN sont chiffrées.</li>
                    <li>✅ <strong>Simplicité</strong> : mise en place rapide sans configuration complexe de VPN.</li>
                    <li>✅ <strong>Sécurité</strong> : le port MySQL (3306) n'est pas exposé sur le réseau, uniquement accessible localement sur le serveur SQL.</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Connexion directe MySQL</em> : rejeté car exposerait le port 3306 sur le LAN.</li>
                    <li><em>VPN IPSec</em> : rejeté pour sa complexité de mise en œuvre.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_07_tunnel_ssh.png" alt="Tunnel SSH">
                <div class="image-caption">
                    Figure 3 – Service de tunnel SSH actif <span>mail_07_tunnel_ssh.png</span>
                </div>
            </div>

            <hr>

            <!-- 4. SÉCURITÉ AVANCÉE ET DURCISSEMENT -->
            <h2>4. SÉCURITÉ AVANCÉE ET DURCISSEMENT</h2>

            <h3>4.1. Pare-feu nftables</h3>

            <div class="justification-box">
                <p><strong>Justification du choix :</strong></p>
                <ul>
                    <li>✅ <strong>Performance</strong> : nftables est plus moderne et performant qu'iptables.</li>
                    <li>✅ <strong>Simplicité</strong> : syntaxe plus claire et maintenable pour les règles complexes.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_08_nftables.png" alt="Règles nftables">
                <div class="image-caption">
                    Figure 4 – Politique de filtrage nftables <span>mail_08_nftables.png</span>
                </div>
            </div>

            <h3>4.2. Protection anti-bruteforce (Fail2ban)</h3>

            <div class="justification-box">
                <p><strong>Justification du choix :</strong></p>
                <ul>
                    <li>✅ <strong>Efficacité</strong> : blocage automatique des IP malveillantes après quelques échecs.</li>
                    <li>✅ <strong>Flexibilité</strong> : jails configurables par service (SMTP, IMAP, SSH).</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Configuration manuelle (scripts)</em> : rejeté pour complexité.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_fail2ban_status.png" alt="Fail2ban">
                <div class="image-caption">
                    Figure 5 – Jails Fail2ban configurées <span>mail_fail2ban_status.png</span>
                </div>
            </div>

            <h3>4.3. Chiffrement TLS et certificats Let's Encrypt</h3>

            <div class="justification-box">
                <p><strong>Justification du choix :</strong></p>
                <ul>
                    <li>✅ <strong>Confidentialité</strong> : échanges entièrement chiffrés.</li>
                    <li>✅ <strong>Automatisation</strong> : renouvellement automatique des certificats.</li>
                    <li>✅ <strong>Confiance</strong> : certificats reconnus par tous les clients de messagerie.</li>
                </ul>
                <p><strong>Alternatives envisagées :</strong></p>
                <ul>
                    <li><em>Certificats auto-signés</em> : rejeté (alerte de sécurité sur les clients).</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_04_compte_admin.png" alt="Certificats">
                <div class="image-caption">
                    Figure 6 – Certificats Let's Encrypt <span>mail_04_compte_admin.png</span>
                </div>
            </div>

            <h3>4.4. Durcissement général et audit Lynis</h3>

            <div class="justification-box">
                <p><strong>Justification :</strong></p>
                <ul>
                    <li>✅ <strong>Lynis</strong> outil de référence pour l'audit de sécurité sous Linux.</li>
                </ul>
            </div>

            <div class="image-container">
                <img src="Images/mail_13_lynis_audit.png" alt="Audit Lynis">
                <div class="image-caption">
                    Figure 7 – Rapport d'audit Lynis (score 97/100) <span>mail_13_lynis_audit.png</span>
                </div>
            </div>

            <hr>

            <!-- 5. TESTS DE VALIDATION -->
            <h2>5. TESTS DE VALIDATION</h2>

            <p>Les tests suivants ont été réalisés et validés :</p>

            <table>
                <tr><th>Test</th><th>Méthode</th><th>Résultat</th></tr>
                <tr><td>Connexion MySQL via tunnel</td><td><code>mysql -u mailuser -p... -h 127.0.0.1 -P 3307 -e "SHOW DATABASES;"</code></td><td>✅ Succès (base mailserver visible)</td></tr>
                <tr><td>Structure de la base</td><td>Affichage des tables et description</td><td>✅ Tables virtual_domains, virtual_users, virtual_aliases</td></tr>
                <tr><td>Compte administrateur</td><td>Requête SELECT sur virtual_users</td><td>✅ admin@ouzbek.global présent</td></tr>
                <tr><td>Test IMAP</td><td><code>openssl s_client -connect 127.0.0.1:993</code></td><td>✅ Réponse "Dovecot ready"</td></tr>
                <tr><td>Pare-feu</td><td><code>nft list ruleset</code></td><td>✅ Règles actives, politique DROP</td></tr>
            </table>

            <hr>

            <!-- 6. CONCLUSION ET PROCHAINES ÉTAPES -->
            <h2>6. CONCLUSION ET PROCHAINES ÉTAPES</h2>

            <h3>6.1. Bilan</h3>
            <p>L'infrastructure de messagerie déployée apporte à Ouzbek Global :</p>
            <ul>
                <li>✅ <strong>Une image professionnelle</strong> avec le domaine @ouzbek.global.</li>
                <li>✅ <strong>Une sécurité renforcée</strong> par l'isolation des données sensibles en LAN.</li>
                <li>✅ <strong>Une conformité</strong> avec les exigences ANSSI et RGPD.</li>
            </ul>

            <h3>6.2. Prochaines étapes (calendrier prévisionnel)</h3>

            <table>
                <tr><th>Étape</th><th>Échéance</th><th>Objectif</th></tr>
                <tr><td>Intégration Active Directory</td><td>Mars 2026</td><td>Authentification unique avec les comptes domaine</td></tr>
                <tr><td>Migration des comptes existants</td><td>Mars 2026</td><td>Transfert des données des utilisateurs</td></tr>
                <tr><td>Formation des utilisateurs</td><td>Mars 2026</td><td>Prise en main des clients de messagerie</td></tr>
                <tr><td>Sauvegardes automatisées</td><td>Avril 2026</td><td>Intégration avec Veeam</td></tr>
            </table>

            <hr>

            <!-- Signature -->
            <div class="signature-block">
                <div>
                    <div><strong>Rapport validé le :</strong> 13 Février 2026</div>
                    <div><strong>Par : Sugira Yannick,</strong> Administrateur Système & Réseau</div>
                </div>
                <div style="text-align:right;">
                    <div class="signature-line"></div>
                    <div style="font-size:0.9rem; color:#475569;">Approbation Direction</div>
                </div>
            </div>

            <div style="margin-top:2rem; font-size:0.8rem; color:#7f8c8d; text-align:center; border-top:1px solid #d1d9e6; padding-top:1rem;">
                Document confidentiel - Ouzbek Global - Plateforme de Messagerie
            </div>
        </div>
    </div>
</body>
</html>